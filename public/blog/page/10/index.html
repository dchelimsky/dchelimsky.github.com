
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>David Chelimsky</title>
  <meta name="author" content="David">

  
  <meta name="description" content="Mike Cohn just wrote a nice post justifying what has become the preferred template for stories in BDD: As a role I want feature So that benefit
">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://blog.davidchelimsky.net/blog/page/10">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="David Chelimsky" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">David Chelimsky</a></h1>
  
    <h2>random thoughtlessness</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:blog.davidchelimsky.net" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/04/28/the-bdd-story-template/">The &#8220;BDD Story Template&#8221;</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-04-28T09:50:30+02:00" pubdate data-updated="true">Apr 28<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://blog.mountaingoatsoftware.com/">Mike Cohn</a> just wrote a <a href="http://blog.mountaingoatsoftware.com/?p=24">nice post</a> justifying what has become the <a href="http://dannorth.net/whats-in-a-story">preferred template for stories in BDD</a>:</p>

<p>As a <em>role</em></p>

<p>I want <em>feature</em></p>

<p>So that <em>benefit</em></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/04/09/rspec-at-github/">RSpec at github</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-04-09T20:41:24+02:00" pubdate data-updated="true">Apr 9<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>After a few months of exploring git and hosting <a href="http://rspec.info">RSpec&rsquo;s</a> git repository at <a href="http://github.com/dchelimsky/rspec">github</a>, we&rsquo;re happy to announce that github is now RSpec&rsquo;s official home for Source Code Management.</p>

<p>Tracking will continue to live at the <a href="http://rspec.lighthouseapp.com">lighthouse</a>.</p>

<p>We will continue to release gems to <a href="Rubyforge">http://rubyforge.org/projects/rspec</a>, but we will no longer be committing changes to the subversion repository there. For Rails users who are using the rspec plugins for Rails, edge rails now supports git-hosted plugins.</p>

<p>We&rsquo;ve broken the project up into four separate repositories:</p>

<ul>
<li><p><a href="http://github.com/dchelimsky/rspec/wikis/home">rspec</a> for the rspec gem/plugin</p></li>
<li><p><a href="http://github.com/dchelimsky/rspec-rails/wikis/home">rspec-rails</a> for the rspec-rails gem/plugin (formerly rspec_on_rails)</p></li>
<li><p><a href="http://github.com/dchelimsky/rspec-tmbundle/wikis/home">rspec-tmbundle</a> for the TextMate bundle</p></li>
<li><p><a href="http://github.com/dchelimsky/rspec-dev/wikis/home">rspec-dev</a> for developers/contributors</p></li>
</ul>


<p>See the wikis for each repository for more information about building, installing and contributing to the project.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/04/04/welcome-pat-maddox/">Welcome Pat Maddox</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-04-04T16:27:31+02:00" pubdate data-updated="true">Apr 4<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&rsquo;m pleased to announce that <a href="http://evang.eli.st/blog">Pat Maddox</a> is joining the <a href="rspec.info">RSpec</a> Development Team.</p>

<p>As you may already know, Pat has been contributing great patches and actively participating on the <a href="http://rubyforge.org/mailman/listinfo/rspec-users">rspec-users</a> and <a href="http://rubyforge.org/mailman/listinfo/rspec-devel">rspec-devel</a> mailing lists for quite some time. He has demonstrated a deep understanding of Behaviour Driven Development in general, and specifically as it applies to Rails, which has certainly posed some of the more interesting questions on our mailing lists.</p>

<p>We are all excited to have Pat on board and look forward to his continued contribution.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/04/01/etec-slides/">ETEC Slides</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-04-01T17:21:59+02:00" pubdate data-updated="true">Apr 1<span>st</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Here are the <a href="http://www.chariotsolutions.com/slides/pdfs/ete2008-IntegrationTestingWithRSpec.pdf">slides</a> from my presentation at <a href="http://www.phillyemergingtech.com/">Emerging Technologies for the Enterprise</a> on <a href="http://www.phillyemergingtech.com/abstracts.php#chelimsky">Integration Testing with RSpec&rsquo;s Story Runner</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/03/05/limiting-scope-of-autotest/">limiting scope of autotest</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-03-05T08:07:48+01:00" pubdate data-updated="true">Mar 5<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>If you use <a href="http://zentest.rubyforge.org/ZenTest/classes/Autotest.html">autotest</a> with <a href="http://rspec.info">rspec</a> or test/unit, you&rsquo;ve probably had this experience (or one like it):</p>

<p>You want to add some new behaviour to a model object, so you write a spec, watch it fail, make it pass, and then wait until the entire spec suite runs. Even if you&rsquo;ve got a fast-running suite, this can be painful sometimes.</p>

<p>Wouldn&rsquo;t it be great if you could limit the scope of what directories autotest observes?  Well it turns out that you can! Recent releases of ZenTest include a find_directories attribute on the autotest object. Just add this to your .autotest file:</p>

<pre><code>Autotest.add_hook :initialize do |at|
unless ARGV.empty?
  at.find_directories = ARGV.dup
end
end
</code></pre>

<p>and then you can say:</p>

<pre><code>autotest app/models spec/models
</code></pre>

<p>and it will only observe those directories. This is nice and flexible, but I find that most of the time I&rsquo;m wanting pairs like that: app/models and spec/models, or app/views/accounts and spec/views/accounts. In that case, I&rsquo;d really like to just say:</p>

<pre><code>autotest models
</code></pre>

<p>To accomplish that you can do this to the hook instead:</p>

<pre><code>Autotest.add_hook :initialize do |at|
unless ARGV.empty?
  at.find_directories = ["spec/#{ARGV.first}","app/#{ARGV.first}"]
end
end
</code></pre>

<p>Want the best of both worlds? Try this:</p>

<pre><code>Autotest.add_hook :initialize do |at|
unless ARGV.empty?
  at.find_directories = ARGV.length == 1 ? ["spec/#{ARGV.first}","app/#{ARGV.first}"] : ARGV.dup
end
end
</code></pre>

<p>The only limitation of this is that it&rsquo;s based on directories, not files. Once in a while, when I&rsquo;m bootstrapping a new object, I&rsquo;ll keep the examples and the implementation in the same file until I&rsquo;ve got things fleshed out a bit the object is ready to play nice with others. In that case, I might like to just point autotest to that one file. I started working on a patch for this for ZenTest, but I&rsquo;m not sure it&rsquo;s worth the extra effort. What do you think?</p>

<p>Regardless &ndash; happy auto-exemplifying!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/02/04/presenting-at-etec/">Presenting at ETEC</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-02-04T16:46:16+01:00" pubdate data-updated="true">Feb 4<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&rsquo;m going to be presenting at <a href="http://www.phillyemergingtech.com/index.php">ETEC</a> on <a href="http://rspec.info">RSpec&rsquo;s</a> Story Runner. This will be more or less the same talk I&rsquo;m <a href="http://blog.davidchelimsky.net/articles/2008/01/26/presenting-at-railsconf-2008">presenting at RailsConf</a> in May, except that it&rsquo;s in March and on the other coast.</p>

<p>See you in Philly!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/02/04/rspec-1-1-3-and-zentest-3-9-1/">RSpec-1.1.3 and ZenTest-3.9.1</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-02-04T09:04:57+01:00" pubdate data-updated="true">Feb 4<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>ZenTest&rsquo;s last two releases are not compatible with previous versions of RSpec. This is <strong>good news</strong> because Autotest now exposes better extension points for subclasses like those that ship with RSpec. Before, RSpec had to monkey patch Autotest to control the mappings of specs to files to run, and the list of files/directories to ignore. Now RSpec gets to use public methods (instead of instance variables) and documented hooks to do it&rsquo;s work.</p>

<p>In the long run, this will keep things more flexible for both RSpec and ZenTest. In the short run, the catch for you is that you have to use compatible versions of RSpec and ZenTest. They are:</p>

<p>  RSpec versionZenTest version</p>

<p>&lt;= 1.1.1
&lt;= 3.7.x</p>

<p>1.1.2
3.8.x</p>

<p>1.1.3
3.9.x</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/01/26/presenting-at-railsconf-2008/">Presenting at RailsConf 2008</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-01-26T18:15:59+01:00" pubdate data-updated="true">Jan 26<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&rsquo;m going to be presenting at <a href="http://en.oreilly.com/rails2008/public/content/home">RailsConf 2008</a> on <a href="http://rspec.info">RSpec&rsquo;s</a> Story Runner. I&rsquo;ll be talking about how I approach writing for the Story Runner and address several related issues including:</p>

<ul>
<li><p>plain text stories vs pure Ruby (when is which appropriate?)</p></li>
<li><p>extending the RailsStory with custom helpers</p></li>
<li><p>testing forms using <a href="http://agilewebdevelopment.com/plugins/webrat">webrat</a> within the Story Runner</p></li>
<li><p>finding a balance of domain and UI scenarios</p></li>
<li><p>duplication between stories/scenarios and model/view/controller/helper examples</p></li>
</ul>


<p>That&rsquo;s probably already more than I can cover fairly in a 45 minute presentation, but feel free to make other suggestions if you have them.</p>

<p>See you in Portland!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/01/20/rspec-new-pattern-option/">RSpec: new &#8211;pattern option</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-01-20T19:01:04+01:00" pubdate data-updated="true">Jan 20<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Updated on 27 May, 2008</p>

<p>I&rsquo;m not in the habit of blogging every change we make to RSpec, but this one <strong>may</strong> change the way your suite behaves if you have not been following convention.</p>

<p>As of RSpec&rsquo;s trunk revision 3246 there is a new command line option that lets you control the filename pattern to match. This allows you to restrict files that are loaded when running the spec command in the same way that you can with rake. It also means that helper files that you may depend on are no longer loaded implicitly.</p>

<p>The default is:</p>

<pre><code>&lt;code&gt;"spec/**/*_spec.rb".
&lt;/code&gt;
</code></pre>

<p>To get rspec to behave as it did before this change, use this:</p>

<pre><code>&lt;code&gt;--pattern "spec/**/*.rb"
&lt;/code&gt;
</code></pre>

<p>If you prefer naming your spec files &ldquo;foo_example.rb&rdquo;, you can do this:</p>

<pre><code>&lt;code&gt;--pattern "spec/**/*_example.rb"
&lt;/code&gt;
</code></pre>

<p>You can also supply multiple patterns (comma separated):</p>

<pre><code>&lt;code&gt;--pattern "spec/**/*_example.rb, spec/**/*_spec.rb"
&lt;/code&gt;
</code></pre>

<p>This is a very handy way to avoid loading resource files (helpers, matchers, etc) except when you require them explicitly from other files.</p>

<p>This is currently only in trunk, but will be part of the next release.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/01/15/rspec-1-1-2-and-zentest-3-8-0/">RSpec-1.1.2 and ZenTest-3.8.0</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-01-15T07:15:55+01:00" pubdate data-updated="true">Jan 15<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The <a href="http://rspec.info">RSpec-1.1.2</a> release includes changes to keep RSpec compatible with autotest in <a href="http://zentest.rubyforge.org/ZenTest/">ZenTest-3.8.0</a>. This new ZenTest release boasts an improved cascading configuration model that works well for subclasses (like those that ship with RSpec) <strong>and</strong> allows users to override the mappings of specs (or tests) to code as well as the list of files that get ignored by autotest.</p>

<p>To support this, Autotest now loads the following files in the following order:</p>

<pre><code>Autotest
AutotestSubClass
~/.autotest
./.autotest
</code></pre>

<p>This allows RSpec (or any other library) to override defaults set in <code>Autotest</code>, and then provides users both generic (~/.autotest) and project specific (./.autotest) control over the mappings and exceptions.</p>

<p>How can you take advantage of this?</p>

<p>When autotest begins to run, it calls its <code>:initialize</code> hook. This hook is exposed by the <code>add_hook</code> method. You can use this to access the mappings and exceptions using the following methods on Autotest:</p>

<pre><code>clear_mappings()
add_mapping(regexp, proc)
remove_mapping(regexp)

clear_exceptions()
add_exception(string)
remove_exception(string)
</code></pre>

<h4>add_mapping</h4>

<p>The <code>add_mapping</code> method adds a key/value pair to a hash that maps regexps to procs. Whenever autotest senses that a file is touched, it looks for the regexp that matches the file name and the runs all the files returned by the associated proc.</p>

<p>Imagine you&rsquo;re working on a shopping cart app. You have some currency conversion behaviour in a <code>Product</code> model that you&rsquo;d like to extract to an <code>acts_as_currency</code> plugin, and you want autotest to observe the process. You might add a mapping like this to .autotest:</p>

<pre><code>Autotest.add_hook :initialize do |at|
at.add_mapping(%r%^plugins/acts_as_currency/lib/.*\.rb$%) {
  at.files_matching %r%^spec/models/product_spec\.rb$% +
  at.files_matching %r%^plugins/acts_as_currency/spec/.*_spec\.rb$%
}
end
</code></pre>

<p>In this case, a change to any of the files in the plugin&rsquo;s lib directory would cause all the plugins specs to run, as well as the spec for the <code>Product</code> model.</p>

<h4>add_exception</h4>

<p>The <code>add_exception</code> method adds paths to a list of paths that Autotest ignores.</p>

<p>I like to run autotest in verbose mode (<code>autotest -v</code>) because it tells me when I change a file that it doesn&rsquo;t know what to do with. The drawback is that it wants to tell me every time I commit because files in the .svn/.hg/.git directories change. So I&rsquo;ve got these all listed as exceptions in my ~/.autotest file, along with assorted others:</p>

<pre><code>Autotest.add_hook :initialize do |at|
%w{.svn .hg .git}.each {|exception|at.add_exception(exception)}
end
</code></pre>

<p>Note that autotest compiles this list to a Regexp with no anchors, so .hgignore and .gitignore would also get ignored in this case.</p>

<h4>Cascading config and granular control</h4>

<p>One of the coolest changes in ZenTest-3.8.0 is that autotest loads both ~/.autotest and ./.autotest. So now you can have the hooks you like on every project (like growl notifation) all in one place and still have project specific settings.</p>

<p>This also allows you to set up global mappings/exceptions and modify them at the project level. See <a href="http://zentest.rubyforge.org/ZenTest/classes/Autotest.html">Autotest&rsquo;s RDoc</a> for more info.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/11/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/9/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/11/28/myron-marston-and-andy-lindeman-are-rspecs-new-project-leads/">Myron Marston and Andy Lindeman are RSpec&#8217;s new project leads</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/11/13/rspec-212-is-released/">rspec-2.12 is released</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/09/22/agile-testing-and-bdd-exchange-2012-in-nyc/">Agile Testing and BDD eXchange 2012 in NYC</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/07/08/rspec-211-is-released/">rspec-2.11 is released!</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/05/14/spec-smell-explicit-use-of-subject/">Spec smell: explicit use of subject</a>
      </li>
    
  </ul>
</section>

<section>
  
  <a href="https://github.com/dchelimsky">@dchelimsky</a> on GitHub
  
</section>

<section>
  <h1>Twitter</h1>
  <a class="twitter-timeline" href="https://twitter.com/dchelimsky" data-widget-id="368978242654330880">Tweets by @dchelimsky</a>
  <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - David -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'davidchelimskysblog';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
